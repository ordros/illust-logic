(this["webpackJsonpillust-logic"]=this["webpackJsonpillust-logic"]||[]).push([[0],{34:function(t,e,n){"use strict";(function(t){var a=n(26),c=n.n(a);e.a=function(e){var n=encodeURI(JSON.stringify(e.flat().map((function(t){return t||0})))),a=t.from(n);return c.a.deflateRawSync(a).toString("base64")}}).call(this,n(13).Buffer)},35:function(t,e,n){"use strict";(function(t){var a=n(26),c=n.n(a),i=function(e,n){for(var a=t.from(e,"base64"),i=c.a.inflateRawSync(a).toString(),r=JSON.parse(decodeURI(i)).map((function(t){return 0===t?null:t})),s=[],l=0;l<n;l++){var o=Math.ceil(n/2)*l,u=Math.ceil(n/2)*(l+1);s.push(r.slice(o,u))}return s};e.a=function(t){var e=t.split("_"),n=parseInt(e[0]),a=parseInt(e[1]);return{sizeX:n,sizeY:a,hintsX:i(e[2],n),hintsY:i(e[3],a)}}}).call(this,n(13).Buffer)},59:function(t,e,n){},60:function(t,e,n){},71:function(t,e){},73:function(t,e){},97:function(t,e,n){"use strict";n.r(e);var a,c,i,r,s,l,o,u,d,h,j,b,f,x,p=n(0),O=n.n(p),y=n(24),g=n.n(y),m=(n(59),n(60),n(11)),v=n(54),S=n(9),H={size:null,table:null,hints:{x:null,y:null,xStatus:null,yStatus:null},mode:"create"},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT":var n=e.payload.size,a=n.x,c=n.y;return{size:{x:a,y:c},table:Array.from({length:a}).map((function(t){return Array.from({length:c}).map((function(){return"white"}))})),mode:"create"};case"SET_PIXEL":var i=e.payload,r=i.position,s=r.x,l=r.y,o=i.cellState,u=t.table;return u[s][l]=o,Object(S.a)(Object(S.a)({},t),{},{table:u});case"SET_HINTS":var d=e.payload,h=d.xHints,j=d.yHints;return Object(S.a)(Object(S.a)({},t),{},{hints:Object(S.a)(Object(S.a)({},t.hints),{},{x:h.map((function(e){return(e||[]).concat(Array.from({length:Math.ceil(t.size.y/2)-(e?e.length:0)}))})),y:j.map((function(e){return(e||[]).concat(Array.from({length:Math.ceil(t.size.x/2)-(e?e.length:0)}))}))})});case"SET_HINTS_STATUS":var b=e.payload,f=b.xHintStatus,x=b.yHintStatus;return Object(S.a)(Object(S.a)({},t),{},{hints:Object(S.a)(Object(S.a)({},t.hints),{},{xStatus:f,yStatus:x})});case"SET_MODE":var p=e.payload.mode;return Object(S.a)(Object(S.a)({},t),{},{mode:p});default:return t}},T=n(4),I=n(5),E=n(1),z=I.a.div(a||(a=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  border: 1px solid black;\n"]))),w=I.a.div(c||(c=Object(T.a)(["\n  background: black;\n  width: 100%;\n  height: 100%;\n"]))),_=I.a.div(i||(i=Object(T.a)(["\n  background: white;\n  width: 100%;\n  height: 100%;\n"]))),N=I.a.div(r||(r=Object(T.a)(["\n  background: white;\n  background-image: linear-gradient(-45deg,\n    transparent 48%,\n    black 48%,\n    black 52%,\n    transparent 52%, \n    transparent),\n  linear-gradient(45deg, /*\u89d2\u5ea6*/\n    transparent 48%,\n    black 48%, /*\u659c\u7dda\u306e\u8272*/\n    black 52%, /*\u659c\u7dda\u306e\u8272*/\n    transparent 52%, \n    transparent);\n  width: 100%;\n  height: 100%;\n"]))),A=function(t){var e=t.status,n=t.x,a=t.y,c=t.mode,i=t.onClickPixel,r=Object(m.b)();return Object(E.jsx)(z,{onClick:function(){var t="";switch(e){case"white":t="black";break;case"black":t="solve"===c?"checked":"white";break;case"checked":default:t="white"}r({type:"SET_PIXEL",payload:{position:{x:n,y:a},cellState:t}}),i()},onMouseEnter:function(t){1===t.buttons&&(r({type:"SET_PIXEL",payload:{position:{x:n,y:a},cellState:"black"}}),i())},children:function(t){switch(t){case"white":return Object(E.jsx)(_,{});case"black":return Object(E.jsx)(w,{});case"checked":default:return Object(E.jsx)(N,{})}}(e)})},M=I.a.div(s||(s=Object(T.a)(["\n  width: 40px;\n  height: 40px;\n  border-collapse: collapse;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #999;\n"]))),P=I.a.table(l||(l=Object(T.a)(["\n  width: 50px;\n  height: 50px;\n  \n  border-spacing: 0;\n  border-collapse: collapse;\n  td {\n   padding: 0;\n   margin: 0;\n  }\n"]))),C=I.a.div(o||(o=Object(T.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid black;\n  ","; \n  border-collapse: collapse;\n"])),(function(t){return t.isMatched?"background: #ffa500":""})),X=I.a.th(u||(u=Object(T.a)(["\n  font-size: 16px;\n  font-weight: bold;\n"]))),F=I.a.div(d||(d=Object(T.a)(["\n  width: 20px;\n  height: 20px;\n"]))),L=function(t){var e=t.size,n=t.table,a=t.xHints,c=t.yHints,i=t.hints,r=t.mode,s=t.onClickPixel,l=function(t){return t?Array.from({length:t},(function(t,e){return e})):[]},o=l(e),u=a&&a.reduce((function(t,e){return Math.max(t.length||t,e.length||e)})),d=c&&c.reduce((function(t,e){return Math.max(t.length||t,e.length||e)})),h=Math.max(u,d),j=i.xStatus,b=i.yStatus;return Object(E.jsxs)(P,{cellSpacing:"0",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)(X,{children:Object(E.jsx)(F,{})}),l(u).map((function(t){return Object(E.jsx)("th",{},t)})),o.map((function(t){return Object(E.jsx)(X,{children:t},t)}))]})}),Object(E.jsxs)("tbody",{children:[l(h).map((function(t){return Object(E.jsxs)("tr",{children:[Object(E.jsx)(X,{as:"td"}),l(u).map((function(t){return Object(E.jsx)("td",{children:Object(E.jsx)(M,{children:Object(E.jsx)(C,{})})},t)})),l(e).map((function(e){return Object(E.jsx)("td",{children:Object(E.jsx)(M,{children:Object(E.jsx)(C,{isMatched:b&&b[e][t],children:c[e][t]||""})})},e)}))]},t)})),o.map((function(t){return Object(E.jsxs)("tr",{children:[Object(E.jsx)(X,{as:"td",children:t},t),l(u).map((function(e){return Object(E.jsx)("td",{children:Object(E.jsx)(M,{children:Object(E.jsx)(C,{isMatched:j&&j[t][e],children:a[t][e]||""})})},e)})),o.map((function(e){return Object(E.jsx)("td",{children:Object(E.jsx)(M,{children:Object(E.jsx)(A,{x:t,y:e,status:n&&n[t][e],onClickPixel:s,mode:r})})},e)}))]},t)}))]})]})},R=I.a.div(h||(h=Object(T.a)(["\n  display: flex;\n  padding: 40px;\n"]))),B=function(t){var e=t.size,n=t.table,a=t.hints,c=t.mode,i=t.onClickPixel;return Object(E.jsx)(R,{children:n&&a&&Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(L,{size:e.x,table:n,xHints:a.x,yHints:a.y,hints:a,mode:c,onClickPixel:i})})})},D=n(53),J=n(3),U=n(16),Y=function(t){var e=[],n=0;return t.push("padding"),t.map((function(t){return"black"===t?"1":"0"})).forEach((function(t,a){"1"===t?n++:n>0&&(e.push(n),n=0)})),t.pop(),e.concat(Array.from({length:t.length/2-e.length}))},q=function(t){if(!t)return{xHints:null,yHints:null};for(var e=[],n=function(n){var a=Array.from({length:t.length}).map((function(t,e){return e})).map((function(e){return t[e][n]}));e.push(a)},a=0;a<t[0].length;a++)n(a);return{xHints:t.map((function(t){return Y(t)})),yHints:e.map((function(t){return Y(t)}))}},G=n(34),K=I.a.div(j||(j=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]))),Q=I.a.div(b||(b=Object(T.a)(["\n  display: flex;\n"]))),V=function(t){var e=t.fromStaticPage,n=void 0!==e&&e,a=Object(m.c)((function(t){return t})),c=a.size,i=a.table,r=a.hints,s=Object(m.b)(),l=Object(p.useState)(""),o=Object(U.a)(l,2),u=o[0],d=o[1],h=function(){s({type:"INIT",payload:{size:{x:10,y:10}}}),s({type:"SET_HINTS",payload:{xHints:Array.from({length:10}),yHints:Array.from({length:10})}}),s({type:"SET_MODE",payload:{mode:"create"}})};return Object(p.useEffect)((function(){i||h()})),Object(p.useEffect)((function(){r&&r.x&&r.y&&function(){var t=Object(G.a)(r.x),e=Object(G.a)(r.y),a="".concat(c.x,"_").concat(c.y,"_").concat(t,"_").concat(e);d(n?"?type=solve&hint=".concat(a):"/solve?type=solve&hint=".concat(a))}()}),[r]),Object(E.jsxs)(K,{children:[Object(E.jsx)(B,{size:c,table:i,hints:r,mode:"create",onClickPixel:function(){var t=q(i),e=t.xHints,n=t.yHints;s({type:"SET_HINTS",payload:{xHints:e,yHints:n}})}}),Object(E.jsxs)(Q,{children:["table size(max size is 20): ",Object(E.jsx)("input",{type:"text",onChange:function(t){return function(t){if(!isNaN(t)){var e=parseInt(t);e>0&&e<=20&&(s({type:"INIT",payload:{size:{x:e,y:e}}}),s({type:"SET_HINTS",payload:{xHints:Array.from({length:e}),yHints:Array.from({length:e})}}))}}(t.target.value)},max:30})]}),Object(E.jsxs)(Q,{children:["Let's solve: ",Object(E.jsx)("a",{href:u,target:"_blank",children:u&&"here"})]}),Object(E.jsx)("button",{onClick:h,children:"Reset!"})]})},W=n(35),Z=n(52),$=n.n(Z),tt=I.a.div(f||(f=Object(T.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]))),et=I.a.p(x||(x=Object(T.a)(["\n  font-size: 40px;\n  font-weight: bold;\n  color: red;\n"]))),nt=function(){var t=Object(m.c)((function(t){return t})),e=t.size,n=t.table,a=t.hints,c=Object(m.b)(),i=Object(J.e)(),r=Object(p.useState)(!1),s=Object(U.a)(r,2),l=s[0],o=s[1],u=Object(p.useState)(null),d=Object(U.a)(u,2),h=(d[0],d[1],function(t,e){for(var n=0;n<t.length;n++)for(var a=0;a<t[0].length;a++)if(t[n][a]!=e[n][a])return!1;return!0}),j=function(t,e){for(var n=[],a=0;a<t.length;a++){for(var c=[],i=0;i<t[0].length;i++)c.push(t[a][i]===e[a][i]);n.push(c)}return n};return Object(p.useEffect)((function(){!function(){if(c({type:"SET_MODE",payload:{mode:"solve"}}),!i.search)return c({type:"INIT",payload:{size:{x:10,y:10}}}),void c({type:"SET_HINTS",payload:{xHints:Array.from({length:10}),yHints:Array.from({length:10})}});var t=$.a.parse(i.search).hint;if(t){var e=Object(W.a)(t),n=e.sizeX,a=e.sizeY,r=e.hintsX,s=e.hintsY;c({type:"INIT",payload:{size:{x:n,y:a}}}),c({type:"SET_HINTS",payload:{xHints:r,yHints:s}})}}()}),[]),Object(E.jsxs)(tt,{children:[Object(E.jsx)(B,{size:e,table:n,hints:a,mode:"solve",onClickPixel:function(){!function(){var t=q(n),e=j(a.x,t.xHints),i=j(a.y,t.yHints);c({type:"SET_HINTS_STATUS",payload:{xHintStatus:e,yHintStatus:i}})}(),function(){var t=q(n);h(t.xHints,a.x)&&h(t.yHints,a.y)?o(!0):o(!1)}()}}),Object(E.jsx)(et,{children:l&&"Solved!"})]})},at=function(){var t=Object(J.e)(),e=Object(p.useState)("create"),n=Object(U.a)(e,2),a=n[0],c=n[1];return Object(p.useEffect)((function(){t&&(t.search.indexOf("type=solve")>0?c("solve"):c("create"))}),[t]),Object(E.jsxs)(E.Fragment,{children:["solve"===a&&Object(E.jsx)(nt,{}),"create"===a&&Object(E.jsx)(V,{fromStaticPage:!0})]})};var ct=function(){var t=Object(v.a)(k);return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(m.a,{store:t,children:Object(E.jsxs)(D.a,{children:[Object(E.jsx)(J.a,{path:"/",component:at}),Object(E.jsx)(J.a,{path:"/create",component:V}),Object(E.jsx)(J.a,{path:"/solve",component:nt})]})})})},it=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),i(t),r(t)}))};g.a.render(Object(E.jsx)(O.a.StrictMode,{children:Object(E.jsx)(ct,{})}),document.getElementById("root")),it()}},[[97,1,2]]]);
//# sourceMappingURL=main.66c6035d.chunk.js.map